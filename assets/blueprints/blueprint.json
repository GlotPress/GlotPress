{
  "landingPage": "/glotpress/",
  "preferredVersions": {
    "php": "8.0",
    "wp": "latest"
  },
  "steps": [
    {
      "step": "login",
      "username": "admin",
      "password": "password"
    },
    {
      "step": "setSiteOptions",
      "options": {
        "permalink_structure": "/%year%/%monthnum%/%day%/%postname%/"
      }
    },
    {
      "step": "writeFile",
      "path": "/wordpress/wp-content/mu-plugins/gp-sqlite.php",
      "data": "<?php add_filter( 'query', function( $query ) {return str_replace( ' BINARY ', ' ', $query );} );if ( ! function_exists( 'libxml_clear_errors' ) ) {function libxml_clear_errors() {}}if ( ! function_exists( 'libxml_use_internal_errors' ) ) {function libxml_use_internal_errors() {}}if ( ! function_exists( 'libxml_get_errors' ) ) {function libxml_get_errors() {}}if ( ! function_exists( 'mysql_get_client_info' ) ) {function mysql_get_client_info() {}}if ( ! function_exists( 'mb_str_split' ) ) {function mb_str_split(  $string = '', $length = 1 , $encoding = null ){return str_split( $string, $length );}}if ( ! class_exists( 'DOMDocument' ) ) {class DOMDocument {function loadHTML() {}}}"
    },
    {
      "step": "installPlugin",
      "pluginZipFile": {
        "resource": "wordpress.org/plugins",
        "slug": "glotpress"
      }
    },
    {
      "step": "mkdir",
      "path": "/wordpress/wp-content/downloads/"
    },
    {
      "step": "writeFile",
      "path": "/wordpress/wp-content/downloads/friends_DE_translations.zip",
      "data": {
        "resource": "url",
        "caption": "Downloading zip file",
        "url": "https://downloads.wordpress.org/translation/plugin/friends/2.8.3/de_DE.zip"
      }
    },
    {
      
      "step": "unzip",
      "zipPath": "/wordpress/wp-content/downloads/friends_DE_translations.zip",
      "extractToPath": "/wordpress/wp-content/languages/plugins"
    },
    {
      "step": "runPHP",
      "code": "<?php include 'wordpress/wp-load.php'; require_once ABSPATH . 'wp-admin/includes/upgrade.php';require_once GP_PATH . GP_INC . 'install-upgrade.php';require_once GP_PATH . GP_INC . 'schema.php';gp_upgrade_db();set_current_user( 1 );$request = new WP_REST_Request();$request->set_param( 'name', 'friends');$request->set_param( 'path', 'wp-' . 'plugin' . 's/' . 'friends' );$request->set_param( 'locale', 'de_DE' );$request->set_param( 'locale_slug', 'default' );print_r( GP::$rest->create_local_project( $request ) );",
      "progress": {
        "caption": "Making plugins translatable"
      }
    }
  ]
}
