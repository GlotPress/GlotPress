jQuery(function(r){$gp.notices.init(),r("#project_id").change(function(){var i=r(this),e=r("option:selected",i).attr("value");e?($gp.notices.notice($gp_mass_create_sets_options.loading),i.prop("disabled",!0),r.ajax({type:"POST",url:$gp_mass_create_sets_options.url,data:{project_id:e},dataType:"json",success:function(n){var e=r("#preview"),s="";function t(e,s){var t=n[e],i="";return i+='<li><span class="'+e+'">'+s+"</span>",t.length&&(i+="<ul>",r.each(t,function(){i+="<li>"+$gp.esc_html(this.name)+" ("+this.locale+"/"+this.slug+")</li>"}),i+="</ul>"),i+="</li>"}e.html("<h3>"+wp.i18n.__("Preview changes:","glotpress")+"</h3>"),s+="<ul>",i.prop("disabled",!1),$gp.notices.clear(),(n.added.length||n.removed.length)&&r("#submit").prop("disabled",!1),s=(s+=t("added",wp.i18n.sprintf(wp.i18n._n("%s set will be added","%s sets will be added",n.added.length,"glotpress"),n.added.length)))+t("removed",wp.i18n.sprintf(wp.i18n._n("%s set will be removed","%s sets will be removed",n.removed.length,"glotpress"),n.removed.length)),e.append(s+="</ul>"),e.fadeIn()},error:function(e,s){i.prop("disabled",!1),s=e.responsehtml?wp.i18n.sprintf(wp.i18n.__("Error: %s","glotpress"),e.responsehtml):wp.i18n.__("Error saving the translation!","glotpress"),$gp.notices.error(s)}})):(r("#submit").prop("disabled",!0),r("#preview").hide())}),r("#submit").prop("disabled",!0),r("#preview").hide()});