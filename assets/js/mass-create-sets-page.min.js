jQuery(function(o){$gp.notices.init(),o("#project_id").change(function(){var r=o(this),e=o("option:selected",r).attr("value");if(!e)return o("#submit").prop("disabled",!0),void o("#preview").hide();$gp.notices.notice($gp_mass_create_sets_options.loading),r.prop("disabled",!0),o.ajax({type:"POST",url:$gp_mass_create_sets_options.url,data:{project_id:e},dataType:"json",success:function(i){var e=o("#preview"),s="";function t(e,s){var t=i[e],r="";return r+='<li><span class="'+e+'">'+sprintf(s,t.length)+"</span>",t.length&&(r+="<ul>",o.each(t,function(){r+="<li>"+$gp.esc_html(this.name)+" ("+this.locale+"/"+this.slug+")</li>"}),r+="</ul>"),r+="</li>"}e.html("<h3>"+__("Preview changes:","glotpress")+"</h3>"),s+="<ul>",r.prop("disabled",!1),$gp.notices.clear(),(i.added.length||i.removed.length)&&o("#submit").prop("disabled",!1),s+=t("added",__("%s set(s) will be added","glotpress")),s+=t("removed",__("%s set(s) will be removed","glotpress")),e.append(s+="</ul>"),e.fadeIn()},error:function(e,s){r.prop("disabled",!1),s=e.responsehtml?sprintf(__("Error: %s","glotpress"),e.responsehtml):__("Error saving the translation!","glotpress"),$gp.notices.error(s)}})}),o("#submit").prop("disabled",!0),o("#preview").hide()});