$gp.glossary=function(e){return{current:null,init:function(e){$gp.init(),""!==$gp_glossary_options.can_edit&&($gp.glossary.table=e,$gp.glossary.install_hooks())},install_hooks:function(){e($gp.glossary.table).on("click","a.edit",$gp.glossary.hooks.show).on("dblclick","tr td",$gp.glossary.hooks.show).on("click","a.cancel",$gp.glossary.hooks.hide).on("click","button.delete",$gp.glossary.hooks.del).on("click","button.save",$gp.glossary.hooks.ok)},show:function(s,r){var o,t,n;s.preventDefault(),o=r.closest("tr"),t=o.data("id"),n=e("#editor-"+t),n.length&&($gp.glossary.current&&$gp.glossary.hide(),n.preview=o,n.row_id=t,$gp.glossary.current=n,n.addClass("active"),n.show(),n.preview.hide(),e("a.add-entry").hasClass("open")&&e("a.add-entry").click(),e("input:first",n).focus())},hide:function(e){e=e?e:$gp.glossary.current,e&&(e.hide(),e.preview.show(),e.removeClass("active"),$gp.glossary.current=null)},save:function(s){var r,o;$gp.glossary.current&&(s.prop("disabled",!0),$gp.notices.notice("Saving&hellip;"),r=$gp.glossary.current,o={_gp_route_nonce:s.data("nonce")},e("#editor-"+r.row_id).find("input, select, textarea").each(function(){o[e(this).attr("name")]=this.value}),e.ajax({type:"POST",url:$gp_glossary_options.url,data:o,dataType:"json",success:function(e){s.prop("disabled",!1),$gp.notices.success("Saved!"),$gp.glossary.replace_current(e)},error:function(e,r){s.prop("disabled",!1),r=e.responseText?"Error: "+e.responseText:"Error saving the glossary item!",$gp.notices.error(r)}}))},del:function(s,r){var o,t,n,a;s.preventDefault(),o=confirm($gp_glossary_options.ge_delete_ays),o&&(t=r.closest("tr"),a=t.prev("tr"),n={_gp_route_nonce:r.data("nonce")},t.find("input, select, textarea").each(function(){n[e(this).attr("name")]=this.value}),e.ajax({type:"POST",url:$gp_glossary_options.delete_url,data:n,success:function(){$gp.notices.success("Deleted!"),t.fadeOut("fast",function(){this.remove()}),a.remove(),1===e("tr",$gp.glossary.table).length&&$gp.glossary.table.remove()},error:function(e,s){s=e.responseText?"Error: "+e.responseText:"Error deleting the glossary item!",$gp.notices.error(s)}}))},replace_current:function(e){var s;$gp.glossary.current&&($gp.glossary.current.after(e),s=$gp.glossary.current,s.preview.remove(),s.remove(),$gp.glossary.current.preview.fadeIn(800))},hooks:{show:function(s){$gp.glossary.show(s,e(this))},del:function(s){$gp.glossary.del(s,e(this))},hide:function(){return $gp.glossary.hide(),!1},ok:function(){return $gp.glossary.save(e(this)),!1}}}}(jQuery),jQuery(function(e){$gp.glossary.init(e("#glossary"))});