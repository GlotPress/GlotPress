$gp.glossary=function(n){return{current:null,init:function(s){$gp.init(),$gp.glossary.tablesorter(),""!==$gp_glossary_options.can_edit&&($gp.glossary.table=s,$gp.glossary.install_hooks())},install_hooks:function(){n($gp.glossary.table).on("click","a.edit",$gp.glossary.hooks.show).on("dblclick","tr td",$gp.glossary.hooks.show).on("click","button.cancel",$gp.glossary.hooks.hide).on("click","button.delete",$gp.glossary.hooks.del).on("click","button.save",$gp.glossary.hooks.ok)},show:function(s,e){var r;s.preventDefault(),e=(s=e.closest("tr")).data("id"),(r=n("#editor-"+e)).length&&($gp.glossary.current&&$gp.glossary.hide(),r.preview=s,r.row_id=e,($gp.glossary.current=r).addClass("active"),r.show(),r.preview.hide(),n("a.add-entry").hasClass("open")&&n("a.add-entry").click(),n("input:first",r).focus())},hide:function(s){(s=s||$gp.glossary.current)&&(s.hide(),s.preview.show(),s.removeClass("active"),$gp.glossary.current=null)},save:function(r){var s,e;$gp.glossary.current&&(r.prop("disabled",!0),$gp.notices.notice(wp.i18n.__("Saving&hellip;","glotpress")),s=$gp.glossary.current,e={_gp_route_nonce:r.data("nonce")},n("#editor-"+s.row_id).find("input, select, textarea").each(function(){e[n(this).attr("name")]=this.value}),n.ajax({type:"POST",url:$gp_glossary_options.url,data:e,dataType:"json",success:function(s){r.prop("disabled",!1),$gp.notices.success(wp.i18n.__("Saved!","glotpress")),$gp.glossary.replace_current(s)},error:function(s,e){r.prop("disabled",!1),e=s.responseText?wp.i18n.sprintf(wp.i18n.__("Error: %s","glotpress"),s.responseText):wp.i18n.__("Error saving the glossary item!","glotpress"),$gp.notices.error(e)}}))},del:function(s,e){var r,o,t;s.preventDefault(),confirm($gp_glossary_options.ge_delete_ays)&&(r=e.closest("tr"),t=r.prev("tr"),o={_gp_route_nonce:e.data("nonce")},r.find("input, select, textarea").each(function(){o[n(this).attr("name")]=this.value}),n.ajax({type:"POST",url:$gp_glossary_options.delete_url,data:o,success:function(){$gp.notices.success(wp.i18n.__("Deleted!","glotpress")),r.fadeOut("fast",function(){this.remove()}),t.remove(),1===n("tr",$gp.glossary.table).length&&$gp.glossary.table.remove()},error:function(s,e){e=s.responseText?wp.i18n.sprintf(wp.i18n.__("Error: %s","glotpress"),s.responseText):wp.i18n.__("Error deleting the glossary item!","glotpress"),$gp.notices.error(e)}}))},replace_current:function(s){$gp.glossary.current&&($gp.glossary.current.after(s),(s=$gp.glossary.current).preview.remove(),s.remove(),$gp.glossary.current.preview.fadeIn(800))},hooks:{show:function(s){$gp.glossary.show(s,n(this))},del:function(s){$gp.glossary.del(s,n(this))},hide:function(){return $gp.glossary.hide(),!1},ok:function(){return $gp.glossary.save(n(this)),!1}},tablesorter:function(){n("#glossary").tablesorter({theme:"glotpress",sortList:[[0,0]],cssChildRow:"editor"})}}}(jQuery),jQuery(function(s){$gp.glossary.init(s("#glossary"))});