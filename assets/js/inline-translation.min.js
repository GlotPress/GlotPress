!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).gpInlineTranslation=t()}(function(){return function r(i,o,s){function a(e,t){if(!o[e]){if(!i[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}n=o[e]={exports:{}},i[e][0].call(n.exports,function(t){return a(i[e][1][t]||t)},n,n.exports,r,i,o,s)}return o[e].exports}for(var l="function"==typeof require&&require,t=0;t<s.length;t++)a(s[t]);return a}({1:[function(t,e,n){!function(h,g,v){"use strict";function t(t,e){return isNaN(t)?e||0:Number(t)}function a(){for(var t=0;t<u.length;t++)u[t].webuiPopover("hide");i.trigger("hiddenAll."+f)}var l="webuiPopover",p="webui-popover",f="webui.popover",n={placement:"auto",width:"auto",height:"auto",trigger:"click",style:"",delay:{show:null,hide:null},async:{before:null,success:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",animation:null,template:'<div class="webui-popover"><div class="arrow"></div><div class="webui-popover-inner"><a href="#" class="close">&times;</a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0},u=[],r=h('<div class="webui-popover-backdrop"></div>'),e=0,c=!1,b=-2e3,i=h(v);function o(t,e){this.$element=h(t),!e||"string"!=typeof e.delay&&"number"!=typeof e.delay||(e.delay={show:e.delay,hide:e.delay}),this.options=h.extend({},n,e),this._defaults=n,this._name=l,this._targetclick=!1,this.init(),u.push(this.$element)}o.prototype={init:function(){"click"===this.getTrigger()?this.$element.off("click touchend").on("click touchend",h.proxy(this.toggle,this)):"rightclick"===this.getTrigger()?this.$element.off("contextmenu").on("contextmenu",h.proxy(this.toggle,this)):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave click").on("mouseenter",h.proxy(this.mouseenterHandler,this)).on("mouseleave",h.proxy(this.mouseleaveHandler,this)),this._poped=!1,this._inited=!0,this._opened=!1,this._idSeed=e,this.options.backdrop&&r.appendTo(v.body).hide(),e++,"sticky"===this.getTrigger()&&this.show()},destroy:function(){for(var t=-1,e=0;e<u.length;e++)if(u[e]===this.$element){t=e;break}u.splice(t,1),this.hide(),this.$element.data("plugin_"+l,null),"click"===this.getTrigger()?this.$element.off("click"):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave"),this.$target&&this.$target.remove()},hide:function(t,e){var n;(t||"sticky"!==this.getTrigger())&&this._opened&&(e&&(e.preventDefault(),e.stopPropagation()),this.xhr&&!0===this.options.abortXHR&&(this.xhr.abort(),this.xhr=null),t=h.Event("hide."+f),this.$element.trigger(t,[this.$target]),this.$target&&(this.$target.removeClass("in").addClass(this.getHideAnimation()),n=this,setTimeout(function(){n.$target.hide()},1)),this.options.backdrop&&r.hide(),this._opened=!1,this.$element.trigger("hidden."+f,[this.$target]),this.options.onHide)&&this.options.onHide(this.$target)},resetAutoHide:function(){var t=this,e=t.getAutoHide();e&&(t.autoHideHandler&&clearTimeout(t.autoHideHandler),t.autoHideHandler=setTimeout(function(){t.hide()},e))},toggle:function(t){t&&(t.preventDefault(),t.stopPropagation()),this[this.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){a()},show:function(){var t=this.getTarget().removeClass().addClass(p).addClass("translator-exclude").addClass(this._customTargetClass);this.options.multi||this.hideAll(),this._opened||(this.getCache()&&this._poped&&""!==this.content||(this.content="",this.setTitle(this.getTitle()),this.options.closeable||t.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),t.show()),this.displayContent(),this.options.onShow&&this.options.onShow(t),this.bindBodyEvents(),this.options.backdrop&&r.show(),this._opened=!0,this.resetAutoHide())},displayContent:function(){function t(){n=c.getElementPosition(),u=c.getTargetPositin(n,a,o,s),c.$target.css(u.position).addClass(a)}var e,n=this.getElementPosition(),r=this.getTarget().removeClass().addClass(p).addClass(this._customTargetClass),i=this.getContentElement(),o=r[0].offsetWidth,s=r[0].offsetHeight,a="bottom",l=h.Event("show."+f),u=(this.$element.trigger(l,[r]),"auto"!==this.options.width&&r.width(this.options.width),"auto"!==this.options.height&&i.height(this.options.height),this.options.style&&this.$target.addClass(p+"-"+this.options.style),this.options.arrow||r.find(".arrow").remove(),r.detach().css({top:b,left:b,display:"block"}),this.getAnimation()&&r.addClass(this.getAnimation()),r.appendTo(v.body),a=this.getPlacement(n),this.$element.trigger("added."+f),this.initTargetEvents(),this.options.padding||("auto"!==this.options.height&&i.css("height",i.outerHeight()),this.$target.addClass("webui-no-padding")),o=r[0].offsetWidth,s=r[0].offsetHeight,this.getTargetPositin(n,a,o,s)),c=(this.$target.css(u.position).addClass(a).addClass("in"),this);h(g).on("resize",function(){clearTimeout(e),e=setTimeout(t,100)}),"iframe"===this.options.type&&(l=r.find("iframe")).width(r.width()).height(l.parent().height()),this.options.arrow||this.$target.css({margin:0}),this.options.arrow&&((i=this.$target.find(".arrow")).removeAttr("style"),u.arrowOffset)&&(-1===u.arrowOffset.left||-1===u.arrowOffset.top?i.hide():i.css(u.arrowOffset)),this._poped=!0,this.$element.trigger("shown."+f,[this.$target])},isTargetLoaded:function(){return 0===this.getTarget().find("i.glyphicon-refresh").length},getTriggerElement:function(){return this.$element},getTarget:function(){var t;return this.$target||(t=l+this._idSeed,this.$target=h(this.options.template).attr("id",t).data("trigger-element",this.getTriggerElement()),this._customTargetClass=this.$target.attr("class")!==p?this.$target.attr("class"):null,this.getTriggerElement().attr("data-target",t)),this.$target},getTitleElement:function(){return this.getTarget().find("."+p+"-title")},getContentElement:function(){return this.$contentElement||(this.$contentElement=this.getTarget().find("."+p+"-content")),this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return t(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return t(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var t=this.$element.attr("data-cache");if(void 0!==t)switch(t.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var t=this.$element.attr("data-delay-show");return void 0!==t?t:0===this.options.delay.show?0:this.options.delay.show||100},getHideDelay:function(){var t=this.$element.attr("data-delay-hide");return void 0!==t?t:0===this.options.delay.hide?0:this.options.delay.hide||100},getAnimation:function(){return this.$element.attr("data-animation")||this.options.animation},getHideAnimation:function(){var t=this.getAnimation();return t?t+"-out":"out"},setTitle:function(t){var e=this.getTitleElement();t?e.html(t):e.remove()},hasContent:function(){return this.getContent()},getContent:function(){var t;if(this.getUrl())switch(this.options.type){case"iframe":this.content=h('<iframe frameborder="0"></iframe>').attr("src",this.getUrl());break;case"html":try{this.content=h(this.getUrl()),this.content.is(":visible")||this.content.show()}catch(t){throw new Error("Unable to get popover content. Invalid selector specified.")}}else this.content||(t="",t="function"==typeof this.options.content?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||t,this.content)||(t=this.$element.next())&&t.hasClass(p+"-content")&&(this.content=t);return this.content},setContent:function(t){var e=this.getTarget(),n=this.getContentElement();"string"==typeof t?n.html(t):t instanceof jQuery&&(t.removeClass(p+"-content"),n.html(""),t.appendTo(n)),this.$target=e},isAsync:function(){return"async"===this.options.type},setContentASync:function(e){var n=this;this.xhr||(this.xhr=h.ajax({url:this.getUrl(),type:"GET",cache:this.getCache(),beforeSend:function(t){n.options.async.before&&n.options.async.before(n,t)},success:function(t){n.bindBodyEvents(),n.content=e&&"function"==typeof e?e.apply(n.$element[0],[t]):t,n.setContent(n.content),n.getContentElement().removeAttr("style"),n.displayContent(),n.options.async.success&&n.options.async.success(n,t)},complete:function(){n.xhr=null}}))},bindBodyEvents:function(){!this.options.dismissible||"click"!==this.getTrigger()&&"rightclick"!==this.getTrigger()||c||(i.off("keyup.webui-popover").on("keyup.webui-popover",h.proxy(this.escapeHandler,this)),i.off("click.webui-popover touchend.webui-popover").on("click.webui-popover touchend.webui-popover",h.proxy(this.bodyClickHandler,this)))},mouseenterHandler:function(){var t=this;t._timeout&&clearTimeout(t._timeout),t._enterTimeout=setTimeout(function(){t.getTarget().is(":visible")||t.show()},this.getDelayShow())},mouseleaveHandler:function(){var t=this;clearTimeout(t._enterTimeout),t._timeout=setTimeout(function(){t.hide()},this.getHideDelay())},escapeHandler:function(t){27===t.keyCode&&this.hideAll()},bodyClickHandler:function(t){for(var e=c=!0,n=0;n<u.length;n++){var r=u[n].data("plugin_"+l);if(r._opened){var i=r.getTarget().offset().left,o=r.getTarget().offset().top,s=r.getTarget().offset().left+r.getTarget().width(),r=r.getTarget().offset().top+r.getTarget().height();if(t.pageX>=i&&t.pageX<=s&&t.pageY>=o&&t.pageY<=r){e=!1;break}}}e&&a()},initTargetEvents:function(){"hover"===this.getTrigger()&&this.$target.off("mouseenter mouseleave").on("mouseenter",h.proxy(this.mouseenterHandler,this)).on("mouseleave",h.proxy(this.mouseleaveHandler,this)),this.$target.find(".close").off("click").on("click",h.proxy(this.hide,this,!0))},getPlacement:function(t){var e=v.documentElement,n=v.body,r=e.clientWidth,i=e.clientHeight,o=h(g).height(),s=h(g).scrollTop(),a=Math.max(n.scrollTop,e.scrollTop),n=Math.max(n.scrollLeft,e.scrollLeft),e=Math.max(0,t.left-n),n=Math.max(0,t.top-a),a="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement,l="horizontal"===a,u="vertical"===a;return"auto"===a||l||u?(a=e<r/3?n<i/3?l?"right-bottom":"bottom-right":n<2*i/3?u?n<=i/2?"bottom-right":"top-right":"right":l?"right-top":"top-right":e<2*r/3?n<i/3?l?e<=r/2?"right-bottom":"left-bottom":"bottom":n<2*i/3?l?e<=r/2?"right":"left":n<=i/2?"bottom":"top":l?e<=r/2?"right-top":"left-top":"top":n<i/3?l?"left-bottom":"bottom-left":n<2*i/3?u?n<=i/2?"bottom-left":"top-left":"left":l?"left-top":"top-left",u&&(a=t.top-s>o/3*2?a.replace("bottom","top"):a.replace("top","bottom"))):"auto-top"===a?a=e<r/3?"top-right":e<2*r/3?"top":"top-left":"auto-bottom"===a?a=e<r/3?"bottom-right":e<2*r/3?"bottom":"bottom-left":"auto-left"===a?a=n<i/3?"left-top":n<2*i/3?"left":"left-bottom":"auto-right"===a&&(a=n<i/3?"right-top":n<2*i/3?"right":"right-bottom"),a},getElementPosition:function(){return h.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTargetPositin:function(t,e,n,r){var i=t,t=v.documentElement,o=v.body,s=t.clientWidth,a=t.clientHeight,l=this.$element.outerWidth(),u=this.$element.outerHeight(),c=Math.max(o.scrollTop,t.scrollTop),o=Math.max(o.scrollLeft,t.scrollLeft),h={},g=null,t=this.options.arrow?20:0,p=l<10+t?t:0,f=u<10+t?t:0,d=0<i.left+i.width/2-p,m=i.left+i.width/2+p<s+o,y=0<i.top+i.height/2-f,x=i.top+i.height/2+f<a+c;switch(e){case"bottom":h={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":h={top:i.top-r,left:i.left+i.width/2-n/2};break;case"left":h={top:i.top+i.height/2-r/2,left:i.left-n};break;case"right":h={top:i.top+i.height/2-r/2,left:i.left+i.width};break;case"top-right":h={top:i.top-r,left:d?i.left-p:10},g={left:d?Math.min(l,n)/2+p:b};break;case"top-left":h={top:i.top-r,left:i.left-n+i.width+(m?p:-10)},g={left:m?n-Math.min(l,n)/2-p:b};break;case"bottom-right":h={top:i.top+i.height,left:d?i.left-p:10},g={left:d?Math.min(l,n)/2+p:b};break;case"bottom-left":h={top:i.top+i.height,left:i.left-n+i.width+(m?p:-10)},g={left:m?n-Math.min(l,n)/2-p:b};break;case"right-top":h={top:i.top-r+i.height+(x?f:-10),left:i.left+i.width},g={top:x?r-Math.min(u,r)/2-f:b};break;case"right-bottom":h={top:y?i.top-f:10,left:i.left+i.width},g={top:y?Math.min(u,r)/2+f:b};break;case"left-top":h={top:i.top-r+i.height+(x?f:-10),left:i.left-n},g={top:x?r-Math.min(u,r)/2-f:b};break;case"left-bottom":h={top:y?i.top-f:10,left:i.left-n},g={top:y?Math.min(u,r)/2+f:b}}return h.top+=this.getOffsetTop(),h.left+=this.getOffsetLeft(),{position:h,arrowOffset:g}}},h.fn[l]=function(e,n){var r=[],t=this.each(function(){var t=h.data(this,"plugin_"+l);t?"destroy"===e?t.destroy():"string"==typeof e&&r.push(t[e]()):(e?"string"==typeof e?"destroy"===e||n||(t=new o(this,null),r.push(t[e]())):"object"==typeof e&&(t=new o(this,e)):t=new o(this,null),h.data(this,"plugin_"+l,t))});return r.length?r:t}}(jQuery,window,document)},{}],2:[function(t,e,n){e.exports=function(e){var n,r,t,i={},o=[];return"function"!=typeof e?null:(r=function(){n&&window.clearTimeout(n),n=window.setTimeout(t,200)},t=function(){var t=o.slice(),a=i;n=null,i={},o=[],0!==t.length&&e(t,function(t){var e,n,r,i,o=t,s=a;if(void 0!==o){for(void 0===o[0]&&(o=[o]),e=0;(n=o[e])&&(void 0!==n&&void 0!==n.original);e++)if(void 0!==s[i=n.original.hash]&&s[i]){for(r=0;r<s[i].length;r++)s[i][r].resolve(n);s[i]=null,delete s[i]}for(i in s)if(s[i])for(r=0;r<s[i].length;r++)s[i][r].reject()}})},function(t){var e=new jQuery.Deferred;return t.hash in i?i[t.hash].push(e):(o.push(t),i[t.hash]=[e]),r(),e})}},{}],3:[function(t,e,n){"use strict";var u=t("./batcher.js");e.exports=function(o,r){var s={url:"",projects:[],translation_set_slug:"default"},i=u(function(t,e){if(!s.projects.length)return e({});l({url:s.restUrl+"/translations-by-originals",data:{projects:s.projects,translation_set_slug:s.translation_set_slug,locale_slug:o.getLocaleCode(),original_strings:JSON.stringify(t)}}).done(function(t){e(t)})}),a="",n={};function l(t){return t=jQuery.extend({method:"POST",data:{},beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",s.nonce)}},t),jQuery.ajax(t)}return{getPermalink:function(t){var e=t.getOriginal().getId(),n=s.translation_set_slug,t=s.url+"projects/"+t.getGlotPressProject()+"/"+o.getLocaleCode()+"/"+n+"?filters[original_id]="+e;return t},loadSettings:function(t){s=t},shouldLoadSuggestions:function(){return!!s.openai_key},getLastPrompt:function(){return a},queryByOriginal:function(t){var e,n;return t.hash=(n="|"+(e=t).singular,n="|"+(n=void 0!==e.context?e.context+n:n),n=void 0!==e.domain?e.domain+n:n),t.hash in r?((e=new jQuery.Deferred).resolve(r[t.hash]),e):i(t)},glossaryMarkup:function(e){var t;return!e.getOriginal().getSingularGlossaryMarkup()&&n[e.getOriginal().getSingular()]&&e.getOriginal().setSingularGlossaryMarkup(n[e.getOriginal().getSingular()]),!e.getOriginal().getPluralGlossaryMarkup()&&n[e.getOriginal().getPlural()]&&e.getOriginal().setPluralGlossaryMarkup(n[e.getOriginal().getPlural()]),e.getOriginal().getSingularGlossaryMarkup()?(new jQuery.Deferred).resolve(e.getOriginal().objectify()):(t={project:e.getGlotPressProject(),translation_set_slug:s.translation_set_slug,locale_slug:o.getLocaleCode(),original:e.getOriginal().objectify()},l({url:s.restUrl+"/glossary-markup",data:t}).then(function(t){t.singular_glossary_markup&&(n[e.getOriginal().getSingular()]=t.singular_glossary_markup,e.getOriginal().setSingularGlossaryMarkup(t.singular_glossary_markup)),t.plural_glossary_markup&&(n[e.getOriginal().getPlural()]=t.plural_glossary_markup,e.getOriginal().setPluralGlossaryMarkup(t.plural_glossary_markup))}))},submitTranslation:function(t,e){e={project:e.getGlotPressProject(),translation_set_slug:s.translation_set_slug,locale_slug:o.getLocaleCode(),translation:t};return window.parent.postMessage({type:"relay",message:"new-translation",data:e},"https://playground.wordpress.net/"),l({url:s.restUrl+"/translation",data:e})},getSuggestedTranslation:function(t,e){var n=[t.getOriginal().getSingular()],r=e&&e.prompt||"",i=o.getLanguageName();return["German"].includes(i)&&(i="informal "+i),s.openai_prompt&&(r+=s.openai_prompt),e&&e.prompt||!t.getOriginal().getSingularGlossaryMarkup()||jQuery.each(jQuery("<div>"+t.getOriginal().getSingularGlossaryMarkup()).find(".glossary-word"),function(t,n){jQuery.each(jQuery(n).data("translations"),function(t,e){r+='Translate "'+n.textContent+'" as "'+e.translation+'" when it is a '+e.pos,e.comment&&(r+=" ("+e.comment+")"),r+=". "})}),(a=r)&&(r+=". Given these conditions, "),r+="Translate the text in this JSON to "+i+" and always respond as pure JSON list (no outside comments!) in the format (append to the list if you have multiple suggestions): ",t.getOriginal().getPlural()?(n.push(t.getOriginal().getPlural()),r+='[["singular translation","plural translation"]]'):r+='["translation"]',e=[{role:"user",content:r+"\n\n"+JSON.stringify(n)}],jQuery.ajax({url:"https://api.openai.com/v1/chat/completions",type:"POST",headers:{Authorization:"Bearer "+s.openai_key},data:JSON.stringify({model:"gpt-3.5-turbo",messages:e,max_tokens:1e3}),contentType:"application/json; charset=utf-8",dataType:"json"})}}}},{"./batcher.js":2}],4:[function(t,e,n){"use strict";var i,r,o,s,a,l,u,c,h,g,p=t("./translation-pair"),f=t("./walker"),d=t("./locale"),m=t("./popover"),y=t("./glotpress"),x=!1,v={cssUrl:"/",currentUserId:!1,localeCode:"en",languageName:"English",pluralForms:"nplurals=2; plural=(n != 1)",contentChangedCallback:function(){}},b=[];function w(e,t){e.createPopover(t,c),t.removeClass("translator-checking").addClass("translator-translatable"),e.isFullyTranslated()?(e.isTranslationWaiting()?t.removeClass("translator-translated").addClass("translator-user-translated"):t.removeClass("translator-user-translated").addClass("translator-translated"),t.each(function(){var t=this;1<t.childNodes.length||3!==t.childNodes[0].nodeType?e.getRegex().test(t.innerHTML)||setTimeout(function(){t.innerHTML=e.getReplacementText(t.innerHTML)},1):e.getRegex().test(t.textContent)||setTimeout(function(){t.textContent=e.getReplacementText(t.textContent)},1)})):t.addClass("translator-untranslated")}function T(t,e){var n,r="",t=t.getOriginal().getPlaceholders();return r=t.length?t.map(function(t){return-1!==e.indexOf(t)?(n=e.indexOf(t),e=e.slice(0,n)+e.slice(n+t.length),'<a class="placeholder-exist inline-placeholder" href="#">'+t+"</a>"):'<a class="inline-placeholder" href="#">'+t+"</a>"}).join(""):r}t("../../assets/js/jquery.webui-popover.js"),e.exports={load:function(){if(void 0===window.gpInlineTranslationData)return!1;r(),o(window.gpInlineTranslationData),l(),s(),u()},unload:function(){var t;i&&window.clearTimeout(i),"object"==typeof window.gpInlineTranslationData&&(window.gpInlineTranslationData.contentChangedCallback=function(){}),jQuery(document).off("submit","form.ct-existing-translation,form.ct-new-translation"),jQuery(".translator-translatable").webuiPopover("destroy"),t=["translator-checked","translator-untranslated","translator-translated","translator-user-translated","translator-untranslatable","translator-dont-translate"],jQuery("."+t.join(", .")).removeClass(t.join(" "))},registerTranslatedCallback:function(t){b.push(t)}},r=function(){var t;v.cssUrl&&((t=document.createElement("link")).setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",v.cssUrl),document.getElementsByTagName("head")[0].appendChild(t)),jQuery("iframe").addClass("translator-untranslatable")},o=function(t){(v="object"==typeof t&&"string"==typeof t.localeCode?t:v).locale=new d(v.localeCode,v.languageName,v.pluralForms),h=v.currentUserId,c=new y(v.locale,v.translations),void 0!==v.glotPress&&c.loadSettings(v.glotPress),p.setTranslationData(v),g=new f(p,jQuery,document)},s=function(){"object"==typeof window.gpInlineTranslationData&&(window.gpInlineTranslationData.contentChangedCallback=function(){i&&window.clearTimeout(i),i=window.setTimeout(u,250)},"object"==typeof window.gpInlineTranslationData.stringsUsedOnPage)&&a()},a=function(){function e(){var t;--n<=0||(t=document.body.innerHTML.length,r!==t&&(r=t,i&&window.clearTimeout(i),i=window.setTimeout(u,1700)),window.setTimeout(e,500))}var n=10,r=document.body.innerHTML.length;window.setTimeout(e,500)},l=function(){jQuery(document).on("input","textarea.translation",function(){var t=jQuery(this).parents("form.ct-new-translation"),e=jQuery(this),n=t.find("button"),t=T(t.data("translationPair"),e.val());jQuery(this).siblings("div.placeholders").html(t).css("display","block"),t=e.filter(function(){return this.value.length}),n.prop("disabled",0===t.length)}),jQuery(document.body).on("focus","textarea.translation",function(){var t,e=jQuery('textarea[name="translation[]"]'),n=jQuery(this).parents("form.ct-new-translation").data("translationPair");e.map(function(){return t=jQuery(this).val(),t=T(n,t),jQuery(this).siblings(".placeholders").html(t),!0})}),jQuery(document).on("submit","form.ct-new-translation",function(){var o=jQuery(this),s=jQuery("."+o.data("nodes")),a=o.data("translationPair"),l=o.find("textarea").map(function(){return jQuery(this).val()}).get();return l.every(function(t){return 0<t.trim().length})&&(s.addClass("translator-user-translated").removeClass("translator-untranslated"),0===s.children().length&&s.text(l[0]),jQuery.when(a.getOriginal().getId()).done(function(n){var r,t=jQuery.makeArray(l),e={},i="";e[n]=t,c.submitTranslation(e,a).done(function(t){var e;void 0!==t[n]&&(r=t[n][0].warnings,void 0!==t[n][0].warnings&&t[n][0].warnings?(r=JSON.parse(r)[0],jQuery.each(r,function(t,e){i+=e+"<br>"}),o.find(".warnings").html('<p class="local-inline-warning"><b>Warnings: </b>'+i+"</p>")):(o.closest(".webui-popover").hide(),a.updateAllTranslations(t[n],h),w(a,s),e=a,b.forEach(function(t){t(e.serialize())}),document.cookie.match(/inlinejumptonext=1/)&&jQuery(".translator-translatable.translator-untranslated:visible").webuiPopover("show")))}).fail(function(t){t.responseJSON&&(o.find(".warnings").html('<p class="local-inline-warning"><b>Error: </b><span class="message">'),o.find(".warnings .message").text(t.responseJSON.message))})})),!1}),jQuery(document).on("submit","form.ct-existing-translation",function(){var t,e=jQuery(this),n=e.data("translationPair");return"object"==typeof n&&(n=new m(n,v.locale,c),t=e.closest(".webui-popover"),e.parent().empty().append(n.getTranslationHtml()).find("textarea").get(0).focus(),t.data("triggerElement").trigger("shown.webui.popover",[t])),!1}),jQuery(document).on("submit","form.copy-translation",function(){var e=jQuery(this).next().find("div.original strong");return jQuery(this).next().find("textarea").each(function(t){e[t]&&(this.focus(),this.select(),document.execCommand("insertText",!1,e[t].textContent))}),jQuery(this).next().find("textarea").first().focus().trigger("keyup"),!1})},u=function(){x?(i&&window.clearTimeout(i),i=window.setTimeout(u,500)):(x=!0,g.walkTextNodes(document.body,function(t,e){e.addClass("translator-checking"),t.fetchOriginalAndTranslations(c,h).fail(function(t,e){e.removeClass("translator-untranslated translator-translated translator-translatable translator-checking"),e.addClass("translator-dont-translate"),e.attr("title","Text-Domain: "+t.getDomain())}.bind(null,t,e)).done(w.bind(null,t,e))},function(){x=!1}))}},{"../../assets/js/jquery.webui-popover.js":1,"./glotpress":3,"./locale":5,"./popover":7,"./translation-pair":8,"./walker":10}],5:[function(t,e,n){var o=t("jed");e.exports=function(t,e,n){var r=o.PF.compile(n),n=n.match(/nplurals\=(\d+);/),i=2;return 1<n.length&&(i=n[1]),{getLocaleCode:function(){return t},getLanguageName:function(){return e},getInfo:function(){return t},getPluralCount:function(){return i},getNumbersForIndex:function(t){for(var e=[],n=0;n<1e3&&!(r(n)===t&&(e.push(n),3<=e.length));++n);return e}}}},{jed:11}],6:[function(t,e,n){var c=t("./translation");e.exports=function(t){var r,i=null,o=null,s=null,a=null,l=null;function u(t,e){var n={singular:r};return i&&(n.plural=i),t&&(n.context=t),e&&(n.domain=e),n}return"string"==typeof t?r=t:i="object"==typeof t&&"string"==typeof t.singular?(r=t.singular,t.plural):(r=t[0],t[1]),void 0!==i&&""!==i||(i=null),void 0!==t.originalId&&(s=t.originalId),void 0!==t.comment&&(o=t.comment),{type:"Original",getSingular:function(){return r},getPlural:function(){return i},generateJsonHash:function(t){return"string"==typeof t&&""!==t?t+"\x04"+r:r},getEmptyTranslation:function(t){var e,n=[""];if(null!==i)for(e=1;e<t.getPluralCount();e++)n.push("");return new c(t,n)},objectify:u,fetchIdAndTranslations:function(t,e,n){return t.queryByOriginal(u(e,n)).done(function(t){s=t.original_id,"string"==typeof t.original_comment&&(o=t.original_comment.replace(/^translators: /,"")),a=t.singular_glossary_markup,l=t.plural_glossary_markup})},getId:function(){return s},getComment:function(){return o},getSingularGlossaryMarkup:function(){return a},getPluralGlossaryMarkup:function(){return l},setSingularGlossaryMarkup:function(t){return a=t},setPluralGlossaryMarkup:function(t){return l=t},getPlaceholders:function(){return Array.from(r.matchAll(/%(\d\$)?([sd])/g)).map(function(t){return t[0]})}}}},{"./translation":9}],7:[function(t,e,n){var d;function m(t){var e=t.getOriginal().getPlural(),n=e?'Singular: <strong class="singular"></strong><br/>Plural:  <strong class="plural"></strong>':'<strong class="singular"></strong>';return n=jQuery("<div>"+n),t.getOriginal().getSingularGlossaryMarkup()?n.find("strong.singular").html(t.getOriginal().getSingularGlossaryMarkup()):n.find("strong.singular").text(t.getOriginal().getSingular()),e&&(t.getOriginal().getPluralGlossaryMarkup()?n.find("strong.plural").html(t.getOriginal().getPluralGlossaryMarkup()):n.find("strong.plural").text(t.getOriginal().getPlural())),n}function o(t){var e,n,r=u("new-translation").clone(),i=r.find("div.original"),o=r.find("div.pair"),s=r.find("div.pairs");for(i.html(m(t)),l(r,t),t.getContext()&&r.find("p.context").text(t.getContext()).css("display","block"),t.getOriginal().getComment()&&r.find("p.comment").text(t.getOriginal().getComment()).css("display","block"),t.getOriginal().getPlaceholders()&&r.find("div.placeholders").css("display","block"),e=t.getTranslation().getTextItems(),n=0;n<e.length;n++)(o=0<n?o.eq(0).clone():o).find("p").text(e[n].getCaption()),o.find("textarea").text(e[n].getText()).attr("placeholder","Please enter a translation in "+d.getLanguageName()),0<n&&s.append(o);return r}function l(t,e){var n,r={};if(e.getOtherOriginals().length){for(t.find("p.other-originals").css("display","block"),r[e.getOriginal().getSingular()]=!0,n=0;n<e.getOtherOriginals().length;n++)r[e.getOtherOriginals()[n]]=!0;for(n=0;n<e.getTranslation().getTextItems().length;n++)r[e.getTranslation().getTextItems()[n].getText()]=!0;t.on("click","p.other-originals a",function(){return jQuery("#gp-show-translation-list").trigger("search",Object.keys(r).join(" || ")),!1})}}function u(t){switch(t){case"existing-translation":return jQuery('<div><form class="ct-existing-translation"><div class="original"></div><p class="context"></p><p class="comment"></p><p class="other-originals">Multiple originals match, <a href="">show them</a></p><hr /><p class="info"></p><div class="pairs"><div class="pair"><p dir="auto"><span class="type"></span><span class="translation"></span></p></div></div><button class="button button-primary">New Translation</button></form></div>');case"new-translation":return jQuery('<div><form class="copy-translation"><button class="local-copy-btn" aria-label="Copy original text"><span class="screen-reader-text">Copy</span><span aria-hidden="true" class="dashicons dashicons-admin-page"></span></button></form><form class="ct-new-translation"><div class="original"></div><p class="warnings"></p><p class="context"></p><p class="comment"></p><p class="other-originals">Multiple originals match, <a href="">show them</a></p><p class="info"></p><div class="pairs"><div class="pair"><p></p><input type="hidden" class="original" name="original[]" /><textarea dir="auto" class="translation" name="translation[]"></textarea><div class="placeholders"></div></div></div><button disabled class="button button-primary save">Save Translation</button></form><div class="additional"></div></div>')}}e.exports=function(p,t,f){var e,n,r,i;return d=t,e=(p.isFullyTranslated()?function(t){var e,n,r,i=u("existing-translation").clone(),o=i.find("div.original"),s=i.find("div.pair"),a=i.find("div.pairs");o.html(m(t)),l(i,t),t.getContext()&&i.find("p.context").text(t.getContext()).css("display","block");t.getOriginal().getComment()&&i.find("p.comment").text(t.getOriginal().getComment()).css("display","block");for(e=t.getTranslation().getTextItems(),r=0;r<e.length;r++)0<r&&(s=s.eq(0).clone()),""!==(n=e[r].getInfoText())&&s.find("span.type").text(n+": "),s.find("span.translation").text(e[r].getText()),0<r&&a.append(s);return i}:o)(p),n="translator-original-"+p.getOriginal().getId(),r=function(){return e.find("form").attr("data-nodes",n),e.find("form").data("translationPair",p),e},i=function(){return"Translate to "+d.getLanguageName()+'<a title="View in GlotPress" href="'+f.getPermalink(p)+'" target="_blank" class="gpPermalink"><span class="dashicons dashicons-external"></span></a>'},{attachTo:function(t){t.hasClass(n)&&t.webuiPopover("destroy"),t.addClass(n).webuiPopover({title:i(),width:400,delay:0,placement:"vertical",content:function(){return jQuery("<div>").append(r())},trigger:"rightclick",translationPair:p}).on("shown.webui.popover",function(t,e){var n,r,i,o,s,a,l,u,c,h,g;e=e,n=p,r=f,u=jQuery(e),c=jQuery(e).find("textarea"),h=jQuery(e).find("div.additional"),g=function(){},r.glossaryMarkup(n).then(function(){u.find("div.original").html(m(n)),g()}),(e=c.get(0))&&(e.focus(),""===c.eq(0).val())&&r.shouldLoadSuggestions()&&(s=function(){return r.getSuggestedTranslation(n,{prompt:h.find("textarea.prompt").val()}).done(i).error(o),h.html('Loading suggested translation <span class="spinner is-active" style="float: none; margin: 0 0 0 5px;"></span>'),!1},o=function(t){t=t.responseJSON;h.html("Error loading suggestions: "+t.message+'. <button class="requery button button-small">Retry</button>'),h.find("button.requery").css("float","left").on("click",s)},i=function(t){var e;if(t.choices&&t.choices[0]&&t.choices[0].message&&t.choices[0].message.content){for(e=JSON.parse(t.choices[0].message.content),h.html('<details><summary>Modify Query</summary><textarea class="prompt" placeholder="Add a custom prompt..."></textarea><blockquote class="unmodifyable"></blockquote> <button class="button requery">Requery</button></details><ul class="suggestions"></ul>'),a=0;a<e.length;a++)l=jQuery('<li><button class="button button-small copy">Copy</button><span></span>'),h.find("ul.suggestions").append(l),l.find("span").text(e[a]),l.find("button").on("click",function(e){return function(){for(var t=0;t<c.length;t++)c.eq(t).focus(),c.eq(t).select(),document.execCommand("insertText",!1,e[t]),c.eq(t).trigger("keyup");return!1}}(Array.isArray(e[a])?e[a]:[e[a]]));h.find("blockquote.unmodifyable").text("Given this, translate the following text to "+d.getLanguageName()+":"),h.find("textarea.prompt").val(r.getLastPrompt()),h.find("button.requery").on("click",s)}else{for(a=0;a<c.length;a++)c.eq(a).prop("placeholder","Please enter your translation");h.text("")}},g=function(){h.html('Loading suggested translation <span class="spinner is-active" style="float: none; margin: 0 0 0 5px;"></span>'),r.getSuggestedTranslation(n).done(i).error(o)})})},getTranslationHtml:function(){return e=o(p),r()}}}},{}],8:[function(t,e,n){var u,d=t("./original"),m=t("./translation"),y=t("./popover");function c(s,n,r,i,t,o,e){var a,l,u,c,h=[],g=!1;function p(t){var e,n,r,i,o;for(h=[],e=0;e<t.length;e++){for(i=[],n=0;r=t[e]["translation_"+n];n++)i.push(r);i=new m(s,i.slice(),t[e]),"object"==typeof(o=i)&&"Translation"===o.type||(o=new m(s,o.slice())),u.getTextItems().length===o.getTextItems().length&&(h.push(o),u=o)}}function f(t){var e;for(a=null,h.length<=1||h.sort(function(t,e){return e.getComparableDate()-t.getComparableDate()}),e=0;e<h.length;e++){if(h[e].getUserId()===t&&h[e].getStatus())return void(u=h[e]);h[e].isCurrent()&&(u=h[e])}}return"object"==typeof n&&"Original"===n.type||(n=new d(n)),"object"==typeof t?("Translation"!==t.type&&(t=new m(s,t)),h.push(t)):t=n.getEmptyTranslation(s),u=t,{type:"TranslationPair",createPopover:function(t,e){new y(this,s,e).attachTo(t)},isFullyTranslated:function(){return u.isFullyTranslated()},isTranslationWaiting:function(){return u.isWaiting()},getOriginal:function(){return n},getOtherOriginals:function(){return void 0===e?[]:e},getContext:function(){return r},getLocale:function(){return s},getDomain:function(){return i},getScreenText:function(){return g},getReplacementText:function(t){var e=this.getTranslation().getTextItems()[0].getText(),n=0,r=[],i=new RegExp("^\\s*"+this.getOriginalRegexString()+"\\s*$");return i.test(t)?r=t.match(i):o&&o.test(t)&&(r=t.match(o)),e.replace(/%(?:(\d)\$)?[sd]/g,function(){return++n,r[void 0===arguments[1]?n:Number(arguments[1])]})},getOriginalRegex:function(){var t;return void 0!==l&&l||(t=this.getOriginalRegexString(),o&&(t+="|"+o.source.substr(4,o.source.length-8)),l=new RegExp("^\\s*"+t+"\\s*$")),l},getOriginalRegexString:function(){var t=x(n.getSingular());return n.getPlural()&&(t+="|"+x(n.getSingular())),t},getRegex:function(){return void 0!==a&&a||(a=u.getTextItems().map(function(t){return x(t.getText())}).join("|"),a=new RegExp("^\\s*"+a+"\\s*$")),a},setScreenText:function(t){g=t},getTranslation:function(){return u},setGlotPressProject:function(t){return c=t},getGlotPressProject:function(){return c},updateAllTranslations:function(t,e){p(t),void 0!==e&&f(e)},serialize:function(){return{singular:n.getSingular(),plural:n.getPlural(),context:r,domain:i,translations:u.serialize(),key:n.generateJsonHash(r)}},fetchOriginalAndTranslations:function(t,e){return n.fetchIdAndTranslations(t,r,i).done(function(t){void 0!==t.translations&&(p(t.translations),f(e),void 0!==t.project)&&(t=t.project,c=t)})}}}function x(t){return t=(t=(t=(t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/%([0-9]\\*\$)?s/g,"(.{0,500}?)")).replace(/%([0-9]\\*\$)?d/g,"([0-9]{0,15}?)")).replace(/%%/g,"%")}function r(t){var e,n={singular:t.data("singular")};return t.data("plural")&&(n.plural=t.data("plural")),t.data("context")&&(n.context=t.data("context")),t.data("domain")&&(n.domain=t.data("domain")),t.data("original-id")&&(n.originalId=t.data("original-id")),t.data("translation")&&(e=t.data("translation")),(n=new c(u.locale,n,n.context,n.domain,e)).setScreenText(t.text()),t.data("project")&&n.setGlotPressProject(t.data("project")),n}function a(t){return void 0===t?"":t.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"")}function l(t,e){var n,r;if((e="string"==typeof e?new RegExp(e):e)instanceof RegExp)for(r=t.children(),n=0;n<r.length;n++)if(e.test(r[n].innerHTML)||e.test(r[n].textContent))return!0;return!1}function h(t,e,n,r){var i,o,s,a,l={};for(i in t)t.hasOwnProperty(i)&&(s=t[i],u.translations[i+"|"+s])&&(l[i]=s);for(i in l=0===Object.keys(l).length?t:l)if(l.hasOwnProperty(i)&&(s=l[i],o=(a=i.split("|")).shift(),a=a.shift(),!e||a===e))return delete l[i],(a=new c(u.locale,s,a,o,n,r,Object.values(l))).setScreenText(n),a;return null}function i(t,e){var n,r,i,o,s=!1;if(1===t.get().length&&1===t.get(0).childNodes.length){if(!(r=a(t.get(0).textContent)).length||3e3<r.length)return!1;if(void 0!==u.stringsUsedOnPage[r]&&(n=h(u.stringsUsedOnPage[r],e,r,new RegExp("^\\s*"+x(r)+"\\s*$"))))return n}for(i=t.html(),o=0;o<u.placeholdersUsedOnPage.length;o++)if((s=u.placeholdersUsedOnPage[o]).regex.test(i)&&!l(t,s.regex)&&(n=h(s.originals,e,i,s.regex)))return n;return!1}c.extractFrom=function(t){return"object"==typeof u&&(t.is("data.translatable")?r(t):t.closest("data.translatable").length?r(t.closest("data.translatable")):(t=t,"object"==typeof u.stringsUsedOnPage&&!t.is("style,script")&&!t.closest("#querylist").length&&(e=t.is("[data-i18n-context]")?t.data("i18n-context"):!!(e=t.closest("[data-i18n-context]")).length&&e.data("i18n-context"),!1===(n=i(t,e))&&void 0!==a((t=t.clone(!0)).find("*").remove().end().text())?i(t,e):n)));var e,n},c.setTranslationData=function(t){var e,n,r=[];if("object"==typeof(u=t).placeholdersUsedOnPage)for(e in u.placeholdersUsedOnPage)n=u.placeholdersUsedOnPage[e],r.push({originals:n,regex:new RegExp("^\\s*"+e+"\\s*$")});u.placeholdersUsedOnPage=r},c._test={anyChildMatches:l},e.exports=c},{"./original":6,"./popover":7,"./translation":9}],9:[function(t,e,n){e.exports=function(n,r,t){var e,i,o,s,a,l,u=0;if("object"==typeof t&&("undefined"!==t.status&&(o=t.status),"undefined"!==t.translation_id&&(l=t.translation_id),"undefined"!==t.user_id&&(s=t.user_id),"undefined"!==t.date_added)&&(a=t.date_added),"string"!=typeof o&&(o="current"),isNaN(l)&&(l=!1),isNaN(s)&&(s=!1),a&&(t=(t=a).split("-"),l=t[2].substr(3).split(":"),u=new Date(t[0],t[1]-1,t[2].substr(0,2),l[0],l[1],l[2])),e=function(e,t){return{isTranslated:function(){return 0<t.length},getCaption:function(){var t;return 1===r.length?"":2===r.length?0===e?"Singular":"Plural":(t=n.getNumbersForIndex(e)).length?"For numbers like: "+t.join(", "):""},getInfoText:function(){var t;return 1===r.length?"":2===r.length?0===i?"Singular":"Plural":(t=n.getNumbersForIndex(i)).length?t.join(", "):""},getText:function(){return t}}},"object"!=typeof r||"number"!=typeof r.length)return!1;for(i=0;i<r.length;i++)r[i]=new e(i,r[i]);return{type:"Translation",isFullyTranslated:function(){for(i=0;i<r.length;i++)if(!1===r[i].isTranslated())return!1;return!0},isCurrent:function(){return"current"===o},isWaiting:function(){return"waiting"===o||"fuzzy"===o},getStatus:function(){return o},getDate:function(){return a},getComparableDate:function(){return u},getUserId:function(){return Number(s)},getTextItems:function(){return r},serialize:function(){var t=[];for(i=0;i<r.length;i++)t.push(r[i].getText());return t}}}},{}],10:[function(t,e,n){function h(t){return null===t.parentElement||["SCRIPT","STYLE","BODY","HTML"].includes(t.parentElement.nodeName)||t.parentElement.classList.contains("translator-checked")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}e.exports=function(l,u,c){return{walkTextNodes:function(t,n,e){var r,i,o=!0,s=5;if("object"==typeof c)for(;o;){for(r=(i=c.createTreeWalker(t,NodeFilter.SHOW_TEXT,h)).currentNode,o=!1;r;)h(r),NodeFilter.FILTER_REJECT,a(r),o=!0,r=i.nextNode();if(--s<0)break}else u(t).find("*").contents().filter(function(){return 3===this.nodeType&&h(this)===NodeFilter.FILTER_ACCEPT}).each(function(){a(this)});function a(t){var e;["SCRIPT","STYLE","BODY","HTML"].includes(t.parentElement.nodeName)||((t=u(t.parentElement)).addClass("translator-checked"),t.closest(".webui-popover").length)||t.hasClass("translator-exclude")||t.closest(".translator-exclude").length||(!1===(e=l.extractFrom(t))?t.addClass("translator-dont-translate"):"function"==typeof n&&n(e,t))}"function"==typeof e&&e()}}}},{}],11:[function(t,e,n){var r=this,i=void 0;function u(t){if(this.defaults={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}}},domain:"messages",debug:!1},this.options=g.extend({},this.defaults,t),this.textdomain(this.options.domain),t.domain&&!this.options.locale_data[this.options.domain])throw new Error("Text domain set to non-existent domain: `"+t.domain+"`")}var o=Array.prototype,s=Object.prototype,a=o.slice,l=s.hasOwnProperty,c=o.forEach,h={},g={forEach:function(t,e,n){var r,i,o;if(null!==t)if(c&&t.forEach===c)t.forEach(e,n);else if(t.length===+t.length){for(r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r,t)===h)return}else for(o in t)if(l.call(t,o)&&e.call(n,t[o],o,t)===h)return},extend:function(n){return this.forEach(a.call(arguments,1),function(t){for(var e in t)n[e]=t[e]}),n}};function p(t){return u.PF.compile(t||"nplurals=2; plural=(n != 1);")}function f(t,e){this._key=t,this._i18n=e}u.context_delimiter=String.fromCharCode(4),g.extend(f.prototype,{onDomain:function(t){return this._domain=t,this},withContext:function(t){return this._context=t,this},ifPlural:function(t,e){return this._val=t,this._pkey=e,this},fetch:function(t){return((t="[object Array]"!={}.toString.call(t)?[].slice.call(arguments,0):t)&&t.length?u.sprintf:function(t){return t})(this._i18n.dcnpgettext(this._domain,this._context,this._key,this._pkey,this._val),t)}}),g.extend(u.prototype,{translate:function(t){return new f(t,this)},textdomain:function(t){if(!t)return this._textdomain;this._textdomain=t},gettext:function(t){return this.dcnpgettext.call(this,i,i,t)},dgettext:function(t,e){return this.dcnpgettext.call(this,t,i,e)},dcgettext:function(t,e){return this.dcnpgettext.call(this,t,i,e)},ngettext:function(t,e,n){return this.dcnpgettext.call(this,i,i,t,e,n)},dngettext:function(t,e,n,r){return this.dcnpgettext.call(this,t,i,e,n,r)},dcngettext:function(t,e,n,r){return this.dcnpgettext.call(this,t,i,e,n,r)},pgettext:function(t,e){return this.dcnpgettext.call(this,i,t,e)},dpgettext:function(t,e,n){return this.dcnpgettext.call(this,t,e,n)},dcpgettext:function(t,e,n){return this.dcnpgettext.call(this,t,e,n)},npgettext:function(t,e,n,r){return this.dcnpgettext.call(this,i,t,e,n,r)},dnpgettext:function(t,e,n,r,i){return this.dcnpgettext.call(this,t,e,n,r,i)},dcnpgettext:function(t,e,n,r,i){if(r=r||n,t=t||this._textdomain,!this.options)return(a=new u).dcnpgettext.call(a,void 0,void 0,n,r,i);if(!this.options.locale_data)throw new Error("No locale data provided.");if(!this.options.locale_data[t])throw new Error("Domain `"+t+"` was not found.");if(!this.options.locale_data[t][""])throw new Error("No locale meta information provided.");if(!n)throw new Error("No translation key found.");var o,s,a=e?e+u.context_delimiter+n:n,e=this.options.locale_data,l=e[t],e=(e.messages||this.defaults.locale_data.messages)[""],e=l[""].plural_forms||l[""]["Plural-Forms"]||l[""]["plural-forms"]||e.plural_forms||e["Plural-Forms"]||e["plural-forms"];if(void 0===i)s=0;else{if("number"!=typeof i&&(i=parseInt(i,10),isNaN(i)))throw new Error("The number that was passed in is not a number.");s=p(e)(i)}if(l)return!(l=l[a])||s>l.length?(this.options.missing_key_callback&&this.options.missing_key_callback(a,t),o=[n,r],!0===this.options.debug&&console.log(o[p(e)(i)]),o[p()(i)]):(o=l[s])||(o=[n,r])[p()(i)];throw new Error("No domain named `"+t+"` could be found.")}}),y.format=function(t,e){for(var n,r,i,o,s,a=1,l=t.length,u=[],c=0;c<l;c++)if("string"===(o=m(t[c])))u.push(t[c]);else if("array"===o){if((i=t[c])[2])for(n=e[a],r=0;r<i[2].length;r++){if(!n.hasOwnProperty(i[2][r]))throw d('[sprintf] property "%s" does not exist',i[2][r]);n=n[i[2][r]]}else n=i[1]?e[i[1]]:e[a++];if(/[^s]/.test(i[8])&&"number"!=m(n))throw d("[sprintf] expecting number but found %s",m(n));switch(null==n&&(n=""),i[8]){case"b":n=n.toString(2);break;case"c":n=String.fromCharCode(n);break;case"d":n=parseInt(n,10);break;case"e":n=i[7]?n.toExponential(i[7]):n.toExponential();break;case"f":n=i[7]?parseFloat(n).toFixed(i[7]):parseFloat(n);break;case"o":n=n.toString(8);break;case"s":n=(n=String(n))&&i[7]?n.substring(0,i[7]):n;break;case"u":n=Math.abs(n);break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase()}n=/[def]/.test(i[8])&&i[3]&&0<=n?"+"+n:n,o=i[4]?"0"==i[4]?"0":i[4].charAt(1):" ",s=i[6]-String(n).length,o=i[6]?function(t,e){for(var n=[];0<e;n[--e]=t);return n.join("")}(o,s):"",u.push(i[5]?n+o:o+n)}return u.join("")},y.cache={},y.parse=function(t){for(var e=t,n=[],r=[],i=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw"[sprintf] huh?";if(n[2]){i|=1;var o=[],s=n[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw"[sprintf] huh?";for(o.push(a[1]);""!==(s=s.substring(a[0].length));){if(null===(a=/^\.([a-z_][a-z_\d]*)/i.exec(s))&&null===(a=/^\[(\d+)\]/.exec(s)))throw"[sprintf] huh?";o.push(a[1])}n[2]=o}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(n)}e=e.substring(n[0].length)}return r};var d=y;function m(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function y(){return y.cache.hasOwnProperty(arguments[0])||(y.cache[arguments[0]]=y.parse(arguments[0])),y.format.call(null,y.cache[arguments[0]],arguments)}u.parse_plural=function(t,e){return t=t.replace(/n/g,e),u.parse_expression(t)},u.sprintf=function(t,e){var n,r;return"[object Array]"=={}.toString.call(e)?(n=t,(r=[].slice.call(e)).unshift(n),d.apply(null,r)):d.apply(this,[].slice.call(arguments))},u.prototype.sprintf=function(){return u.sprintf.apply(this,arguments)},(u.PF={}).parse=function(t){t=u.PF.extractPluralExpr(t);return u.PF.parser.parse.call(u.PF.parser,t)},u.PF.compile=function(t){var e=u.PF.parse(t);return function(t){return!0===(t=u.PF.interpreter(e)(t))?1:t||0}},u.PF.interpreter=function(e){return function(t){switch(e.type){case"GROUP":return u.PF.interpreter(e.expr)(t);case"TERNARY":return u.PF.interpreter(e.expr)(t)?u.PF.interpreter(e.truthy)(t):u.PF.interpreter(e.falsey)(t);case"OR":return u.PF.interpreter(e.left)(t)||u.PF.interpreter(e.right)(t);case"AND":return u.PF.interpreter(e.left)(t)&&u.PF.interpreter(e.right)(t);case"LT":return u.PF.interpreter(e.left)(t)<u.PF.interpreter(e.right)(t);case"GT":return u.PF.interpreter(e.left)(t)>u.PF.interpreter(e.right)(t);case"LTE":return u.PF.interpreter(e.left)(t)<=u.PF.interpreter(e.right)(t);case"GTE":return u.PF.interpreter(e.left)(t)>=u.PF.interpreter(e.right)(t);case"EQ":return u.PF.interpreter(e.left)(t)==u.PF.interpreter(e.right)(t);case"NEQ":return u.PF.interpreter(e.left)(t)!=u.PF.interpreter(e.right)(t);case"MOD":return u.PF.interpreter(e.left)(t)%u.PF.interpreter(e.right)(t);case"VAR":return t;case"NUM":return e.val;default:throw new Error("Invalid Token found.")}}},u.PF.extractPluralExpr=function(t){t=t.replace(/^\s\s*/,"").replace(/\s\s*$/,"");var e=/nplurals\=(\d+);/,n=(t=/;\s*$/.test(t)?t:t.concat(";")).match(e);if(!(1<n.length))throw new Error("nplurals not found in plural_forms string: "+t);if(n[1],(n=(t=t.replace(e,"")).match(/plural\=(.*);/))&&1<n.length)return n[1];throw new Error("`plural` expression not found: "+t)},u.PF.parser=((s={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,"?":6,":":7,"||":8,"&&":9,"<":10,"<=":11,">":12,">=":13,"!=":14,"==":15,"%":16,"(":17,")":18,n:19,NUMBER:20,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"?",7:":",8:"||",9:"&&",10:"<",11:"<=",12:">",13:">=",14:"!=",15:"==",16:"%",17:"(",18:")",19:"n",20:"NUMBER"},productions_:[0,[3,2],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,1],[4,1]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 1:return{type:"GROUP",expr:o[a-1]};case 2:this.$={type:"TERNARY",expr:o[a-4],truthy:o[a-2],falsey:o[a]};break;case 3:this.$={type:"OR",left:o[a-2],right:o[a]};break;case 4:this.$={type:"AND",left:o[a-2],right:o[a]};break;case 5:this.$={type:"LT",left:o[a-2],right:o[a]};break;case 6:this.$={type:"LTE",left:o[a-2],right:o[a]};break;case 7:this.$={type:"GT",left:o[a-2],right:o[a]};break;case 8:this.$={type:"GTE",left:o[a-2],right:o[a]};break;case 9:this.$={type:"NEQ",left:o[a-2],right:o[a]};break;case 10:this.$={type:"EQ",left:o[a-2],right:o[a]};break;case 11:this.$={type:"MOD",left:o[a-2],right:o[a]};break;case 12:this.$={type:"GROUP",expr:o[a-1]};break;case 13:this.$={type:"VAR"};break;case 14:this.$={type:"NUM",val:Number(t)}}},table:[{3:1,4:2,17:[1,3],19:[1,4],20:[1,5]},{1:[3]},{5:[1,6],6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{4:17,17:[1,3],19:[1,4],20:[1,5]},{5:[2,13],6:[2,13],7:[2,13],8:[2,13],9:[2,13],10:[2,13],11:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],18:[2,13]},{5:[2,14],6:[2,14],7:[2,14],8:[2,14],9:[2,14],10:[2,14],11:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],18:[2,14]},{1:[2,1]},{4:18,17:[1,3],19:[1,4],20:[1,5]},{4:19,17:[1,3],19:[1,4],20:[1,5]},{4:20,17:[1,3],19:[1,4],20:[1,5]},{4:21,17:[1,3],19:[1,4],20:[1,5]},{4:22,17:[1,3],19:[1,4],20:[1,5]},{4:23,17:[1,3],19:[1,4],20:[1,5]},{4:24,17:[1,3],19:[1,4],20:[1,5]},{4:25,17:[1,3],19:[1,4],20:[1,5]},{4:26,17:[1,3],19:[1,4],20:[1,5]},{4:27,17:[1,3],19:[1,4],20:[1,5]},{6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[1,28]},{6:[1,7],7:[1,29],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{5:[2,3],6:[2,3],7:[2,3],8:[2,3],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,3]},{5:[2,4],6:[2,4],7:[2,4],8:[2,4],9:[2,4],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,4]},{5:[2,5],6:[2,5],7:[2,5],8:[2,5],9:[2,5],10:[2,5],11:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[1,16],18:[2,5]},{5:[2,6],6:[2,6],7:[2,6],8:[2,6],9:[2,6],10:[2,6],11:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[1,16],18:[2,6]},{5:[2,7],6:[2,7],7:[2,7],8:[2,7],9:[2,7],10:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[1,16],18:[2,7]},{5:[2,8],6:[2,8],7:[2,8],8:[2,8],9:[2,8],10:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[2,8],16:[1,16],18:[2,8]},{5:[2,9],6:[2,9],7:[2,9],8:[2,9],9:[2,9],10:[2,9],11:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[2,9],16:[1,16],18:[2,9]},{5:[2,10],6:[2,10],7:[2,10],8:[2,10],9:[2,10],10:[2,10],11:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[1,16],18:[2,10]},{5:[2,11],6:[2,11],7:[2,11],8:[2,11],9:[2,11],10:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],18:[2,11]},{5:[2,12],6:[2,12],7:[2,12],8:[2,12],9:[2,12],10:[2,12],11:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],18:[2,12]},{4:30,17:[1,3],19:[1,4],20:[1,5]},{5:[2,2],6:[1,7],7:[2,2],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,2]}],defaultActions:{6:[2,1]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=this,n=[0],r=[null],i=[],o=this.table,s="",a=0,l=0,u=0,c=(this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={}),this.lexer.yylloc);function h(){var t=e.lexer.lex()||1;return t="number"!=typeof t?e.symbols_[t]||t:t}i.push(c),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var g,p,f,d,m,y,x,v,b,w={};;){if(f=n[n.length-1],void 0===(d=this.defaultActions[f]||(null==g&&(g=h()),o[f]&&o[f][g]))||!d.length||!d[0]){if(!u){for(m in v=[],o[f])this.terminals_[m]&&2<m&&v.push("'"+this.terminals_[m]+"'");var T="",T=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+this.terminals_[g]+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==g?"end of input":"'"+(this.terminals_[g]||g)+"'");this.parseError(T,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:c,expected:v})}if(3==u){if(1==g)throw new Error(T||"Parsing halted.");l=this.lexer.yyleng,s=this.lexer.yytext,a=this.lexer.yylineno,c=this.lexer.yylloc,g=h()}for(;;){if(2..toString()in o[f])break;if(0==f)throw new Error(T||"Parsing halted.");b=1,n.length=n.length-2*b,r.length=r.length-b,i.length=i.length-b,f=n[n.length-1]}p=g,g=2,d=o[f=n[n.length-1]]&&o[f][2],u=3}if(d[0]instanceof Array&&1<d.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+g);switch(d[0]){case 1:n.push(g),r.push(this.lexer.yytext),i.push(this.lexer.yylloc),n.push(d[1]),g=null,p?(g=p,p=null):(l=this.lexer.yyleng,s=this.lexer.yytext,a=this.lexer.yylineno,c=this.lexer.yylloc,0<u&&u--);break;case 2:if(y=this.productions_[d[1]][1],w.$=r[r.length-y],w._$={first_line:i[i.length-(y||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(y||1)].first_column,last_column:i[i.length-1].last_column},void 0!==(x=this.performAction.call(w,s,l,a,this.yy,d[1],r,i)))return x;y&&(n=n.slice(0,-1*y*2),r=r.slice(0,-1*y),i=i.slice(0,-1*y)),n.push(this.productions_[d[1]][0]),r.push(w.$),i.push(w._$),x=o[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.match+=t,this.matched+=t,t.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),t},unput:function(t){return this._input=t+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var t,e,n=this._currentRules(),r=0;r<n.length;r++)if(t=this._input.match(this.rules[n[r]]))return(e=t[0].match(/\n.*/g))&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],this.performAction.call(this,this.yy,this,n[r],this.conditionStack[this.conditionStack.length-1])||void 0;if(""===this._input)return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},performAction:function(t,e,n,r){switch(n){case 0:break;case 1:return 20;case 2:return 19;case 3:return 8;case 4:return 9;case 5:return 6;case 6:return 7;case 7:return 11;case 8:return 13;case 9:return 10;case 10:return 12;case 11:return 14;case 12:return 15;case 13:return 16;case 14:return 17;case 15:return 18;case 16:return 5;case 17:return"INVALID"}},rules:[/^\s+/,/^[0-9]+(\.[0-9]+)?\b/,/^n\b/,/^\|\|/,/^&&/,/^\?/,/^:/,/^<=/,/^>=/,/^</,/^>/,/^!=/,/^==/,/^%/,/^\(/,/^\)/,/^$/,/^./],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],inclusive:!0}}},s),void 0!==n?(n=void 0!==e&&e.exports?e.exports=u:n).Jed=u:r.Jed=u},{}]},{},[4])(4)});