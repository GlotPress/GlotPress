!function(g,p,y){"use strict";function t(t,e){return isNaN(t)?e||0:Number(t)}function r(){for(var t=0;t<l.length;t++)l[t].webuiPopover("hide");s.trigger("hiddenAll."+d)}var a="webuiPopover",f="webui-popover",d="webui.popover",i={placement:"auto",width:"auto",height:"auto",trigger:"click",style:"",delay:{show:null,hide:null},async:{before:null,success:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",animation:null,template:'<div class="webui-popover"><div class="arrow"></div><div class="webui-popover-inner"><a href="#" class="close">&times;</a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0},l=[],o=g('<div class="webui-popover-backdrop"></div>'),e=0,c=!1,w=-2e3,s=g(y);function n(t,e){this.$element=g(t),!e||"string"!=typeof e.delay&&"number"!=typeof e.delay||(e.delay={show:e.delay,hide:e.delay}),this.options=g.extend({},i,e),this._defaults=i,this._name=a,this._targetclick=!1,this.init(),l.push(this.$element)}n.prototype={init:function(){"click"===this.getTrigger()?this.$element.off("click touchend").on("click touchend",g.proxy(this.toggle,this)):"rightclick"===this.getTrigger()?this.$element.off("contextmenu").on("contextmenu",g.proxy(this.toggle,this)):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave click").on("mouseenter",g.proxy(this.mouseenterHandler,this)).on("mouseleave",g.proxy(this.mouseleaveHandler,this)),this._poped=!1,this._inited=!0,this._opened=!1,this._idSeed=e,this.options.backdrop&&o.appendTo(y.body).hide(),e++,"sticky"===this.getTrigger()&&this.show()},destroy:function(){for(var t=-1,e=0;e<l.length;e++)if(l[e]===this.$element){t=e;break}l.splice(t,1),this.hide(),this.$element.data("plugin_"+a,null),"click"===this.getTrigger()?this.$element.off("click"):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave"),this.$target&&this.$target.remove()},hide:function(t,e){var i;(t||"sticky"!==this.getTrigger())&&this._opened&&(e&&(e.preventDefault(),e.stopPropagation()),this.xhr&&!0===this.options.abortXHR&&(this.xhr.abort(),this.xhr=null),t=g.Event("hide."+d),this.$element.trigger(t,[this.$target]),this.$target&&(this.$target.removeClass("in").addClass(this.getHideAnimation()),i=this,setTimeout(function(){i.$target.hide()},1)),this.options.backdrop&&o.hide(),this._opened=!1,this.$element.trigger("hidden."+d,[this.$target]),this.options.onHide)&&this.options.onHide(this.$target)},resetAutoHide:function(){var t=this,e=t.getAutoHide();e&&(t.autoHideHandler&&clearTimeout(t.autoHideHandler),t.autoHideHandler=setTimeout(function(){t.hide()},e))},toggle:function(t){t&&(t.preventDefault(),t.stopPropagation()),this[this.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){r()},show:function(){var t=this.getTarget().removeClass().addClass(f).addClass("translator-exclude").addClass(this._customTargetClass);this.options.multi||this.hideAll(),this._opened||(this.getCache()&&this._poped&&""!==this.content||(this.content="",this.setTitle(this.getTitle()),this.options.closeable||t.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),t.show()),this.displayContent(),this.options.onShow&&this.options.onShow(t),this.bindBodyEvents(),this.options.backdrop&&o.show(),this._opened=!0,this.resetAutoHide())},displayContent:function(){function t(){i=c.getElementPosition(),l=c.getTargetPositin(i,r,n,h),c.$target.css(l.position).addClass(r)}var e,i=this.getElementPosition(),o=this.getTarget().removeClass().addClass(f).addClass(this._customTargetClass),s=this.getContentElement(),n=o[0].offsetWidth,h=o[0].offsetHeight,r="bottom",a=g.Event("show."+d),l=(this.$element.trigger(a,[o]),"auto"!==this.options.width&&o.width(this.options.width),"auto"!==this.options.height&&s.height(this.options.height),this.options.style&&this.$target.addClass(f+"-"+this.options.style),this.options.arrow||o.find(".arrow").remove(),o.detach().css({top:w,left:w,display:"block"}),this.getAnimation()&&o.addClass(this.getAnimation()),o.appendTo(y.body),r=this.getPlacement(i),this.$element.trigger("added."+d),this.initTargetEvents(),this.options.padding||("auto"!==this.options.height&&s.css("height",s.outerHeight()),this.$target.addClass("webui-no-padding")),n=o[0].offsetWidth,h=o[0].offsetHeight,this.getTargetPositin(i,r,n,h)),c=(this.$target.css(l.position).addClass(r).addClass("in"),this);g(p).on("resize",function(){clearTimeout(e),e=setTimeout(t,100)}),"iframe"===this.options.type&&(a=o.find("iframe")).width(o.width()).height(a.parent().height()),this.options.arrow||this.$target.css({margin:0}),this.options.arrow&&((s=this.$target.find(".arrow")).removeAttr("style"),l.arrowOffset)&&(-1===l.arrowOffset.left||-1===l.arrowOffset.top?s.hide():s.css(l.arrowOffset)),this._poped=!0,this.$element.trigger("shown."+d,[this.$target])},isTargetLoaded:function(){return 0===this.getTarget().find("i.glyphicon-refresh").length},getTriggerElement:function(){return this.$element},getTarget:function(){var t;return this.$target||(t=a+this._idSeed,this.$target=g(this.options.template).attr("id",t).data("trigger-element",this.getTriggerElement()),this._customTargetClass=this.$target.attr("class")!==f?this.$target.attr("class"):null,this.getTriggerElement().attr("data-target",t)),this.$target},getTitleElement:function(){return this.getTarget().find("."+f+"-title")},getContentElement:function(){return this.$contentElement||(this.$contentElement=this.getTarget().find("."+f+"-content")),this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return t(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return t(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var t=this.$element.attr("data-cache");if(void 0!==t)switch(t.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var t=this.$element.attr("data-delay-show");return void 0!==t?t:0===this.options.delay.show?0:this.options.delay.show||100},getHideDelay:function(){var t=this.$element.attr("data-delay-hide");return void 0!==t?t:0===this.options.delay.hide?0:this.options.delay.hide||100},getAnimation:function(){return this.$element.attr("data-animation")||this.options.animation},getHideAnimation:function(){var t=this.getAnimation();return t?t+"-out":"out"},setTitle:function(t){var e=this.getTitleElement();t?e.html(t):e.remove()},hasContent:function(){return this.getContent()},getContent:function(){var t;if(this.getUrl())switch(this.options.type){case"iframe":this.content=g('<iframe frameborder="0"></iframe>').attr("src",this.getUrl());break;case"html":try{this.content=g(this.getUrl()),this.content.is(":visible")||this.content.show()}catch(t){throw new Error("Unable to get popover content. Invalid selector specified.")}}else this.content||(t="",t="function"==typeof this.options.content?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||t,this.content)||(t=this.$element.next())&&t.hasClass(f+"-content")&&(this.content=t);return this.content},setContent:function(t){var e=this.getTarget(),i=this.getContentElement();"string"==typeof t?i.html(t):t instanceof jQuery&&(t.removeClass(f+"-content"),i.html(""),t.appendTo(i)),this.$target=e},isAsync:function(){return"async"===this.options.type},setContentASync:function(e){var i=this;this.xhr||(this.xhr=g.ajax({url:this.getUrl(),type:"GET",cache:this.getCache(),beforeSend:function(t){i.options.async.before&&i.options.async.before(i,t)},success:function(t){i.bindBodyEvents(),i.content=e&&"function"==typeof e?e.apply(i.$element[0],[t]):t,i.setContent(i.content),i.getContentElement().removeAttr("style"),i.displayContent(),i.options.async.success&&i.options.async.success(i,t)},complete:function(){i.xhr=null}}))},bindBodyEvents:function(){!this.options.dismissible||"click"!==this.getTrigger()&&"rightclick"!==this.getTrigger()||c||(s.off("keyup.webui-popover").on("keyup.webui-popover",g.proxy(this.escapeHandler,this)),s.off("click.webui-popover touchend.webui-popover").on("click.webui-popover touchend.webui-popover",g.proxy(this.bodyClickHandler,this)))},mouseenterHandler:function(){var t=this;t._timeout&&clearTimeout(t._timeout),t._enterTimeout=setTimeout(function(){t.getTarget().is(":visible")||t.show()},this.getDelayShow())},mouseleaveHandler:function(){var t=this;clearTimeout(t._enterTimeout),t._timeout=setTimeout(function(){t.hide()},this.getHideDelay())},escapeHandler:function(t){27===t.keyCode&&this.hideAll()},bodyClickHandler:function(t){for(var e=c=!0,i=0;i<l.length;i++){var o=l[i].data("plugin_"+a);if(o._opened){var s=o.getTarget().offset().left,n=o.getTarget().offset().top,h=o.getTarget().offset().left+o.getTarget().width(),o=o.getTarget().offset().top+o.getTarget().height();if(t.pageX>=s&&t.pageX<=h&&t.pageY>=n&&t.pageY<=o){e=!1;break}}}e&&r()},initTargetEvents:function(){"hover"===this.getTrigger()&&this.$target.off("mouseenter mouseleave").on("mouseenter",g.proxy(this.mouseenterHandler,this)).on("mouseleave",g.proxy(this.mouseleaveHandler,this)),this.$target.find(".close").off("click").on("click",g.proxy(this.hide,this,!0))},getPlacement:function(t){var e=y.documentElement,i=y.body,o=e.clientWidth,s=e.clientHeight,n=g(p).height(),h=g(p).scrollTop(),r=Math.max(i.scrollTop,e.scrollTop),i=Math.max(i.scrollLeft,e.scrollLeft),e=Math.max(0,t.left-i),i=Math.max(0,t.top-r),r="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement,a="horizontal"===r,l="vertical"===r;return"auto"===r||a||l?(r=e<o/3?i<s/3?a?"right-bottom":"bottom-right":i<2*s/3?l?i<=s/2?"bottom-right":"top-right":"right":a?"right-top":"top-right":e<2*o/3?i<s/3?a?e<=o/2?"right-bottom":"left-bottom":"bottom":i<2*s/3?a?e<=o/2?"right":"left":i<=s/2?"bottom":"top":a?e<=o/2?"right-top":"left-top":"top":i<s/3?a?"left-bottom":"bottom-left":i<2*s/3?l?i<=s/2?"bottom-left":"top-left":"left":a?"left-top":"top-left",l&&(r=t.top-h>n/3*2?r.replace("bottom","top"):r.replace("top","bottom"))):"auto-top"===r?r=e<o/3?"top-right":e<2*o/3?"top":"top-left":"auto-bottom"===r?r=e<o/3?"bottom-right":e<2*o/3?"bottom":"bottom-left":"auto-left"===r?r=i<s/3?"left-top":i<2*s/3?"left":"left-bottom":"auto-right"===r&&(r=i<s/3?"right-top":i<2*s/3?"right":"right-bottom"),r},getElementPosition:function(){return g.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTargetPositin:function(t,e,i,o){var s=t,t=y.documentElement,n=y.body,h=t.clientWidth,r=t.clientHeight,a=this.$element.outerWidth(),l=this.$element.outerHeight(),c=Math.max(n.scrollTop,t.scrollTop),n=Math.max(n.scrollLeft,t.scrollLeft),g={},p=null,t=this.options.arrow?20:0,f=a<10+t?t:0,d=l<10+t?t:0,u=0<s.left+s.width/2-f,m=s.left+s.width/2+f<h+n,b=0<s.top+s.height/2-d,v=s.top+s.height/2+d<r+c;switch(e){case"bottom":g={top:s.top+s.height,left:s.left+s.width/2-i/2};break;case"top":g={top:s.top-o,left:s.left+s.width/2-i/2};break;case"left":g={top:s.top+s.height/2-o/2,left:s.left-i};break;case"right":g={top:s.top+s.height/2-o/2,left:s.left+s.width};break;case"top-right":g={top:s.top-o,left:u?s.left-f:10},p={left:u?Math.min(a,i)/2+f:w};break;case"top-left":g={top:s.top-o,left:s.left-i+s.width+(m?f:-10)},p={left:m?i-Math.min(a,i)/2-f:w};break;case"bottom-right":g={top:s.top+s.height,left:u?s.left-f:10},p={left:u?Math.min(a,i)/2+f:w};break;case"bottom-left":g={top:s.top+s.height,left:s.left-i+s.width+(m?f:-10)},p={left:m?i-Math.min(a,i)/2-f:w};break;case"right-top":g={top:s.top-o+s.height+(v?d:-10),left:s.left+s.width},p={top:v?o-Math.min(l,o)/2-d:w};break;case"right-bottom":g={top:b?s.top-d:10,left:s.left+s.width},p={top:b?Math.min(l,o)/2+d:w};break;case"left-top":g={top:s.top-o+s.height+(v?d:-10),left:s.left-i},p={top:v?o-Math.min(l,o)/2-d:w};break;case"left-bottom":g={top:b?s.top-d:10,left:s.left-i},p={top:b?Math.min(l,o)/2+d:w}}return g.top+=this.getOffsetTop(),g.left+=this.getOffsetLeft(),{position:g,arrowOffset:p}}},g.fn[a]=function(e,i){var o=[],t=this.each(function(){var t=g.data(this,"plugin_"+a);t?"destroy"===e?t.destroy():"string"==typeof e&&o.push(t[e]()):(e?"string"==typeof e?"destroy"===e||i||(t=new n(this,null),o.push(t[e]())):"object"==typeof e&&(t=new n(this,e)):t=new n(this,null),g.data(this,"plugin_"+a,t))});return o.length?o:t}}(jQuery,window,document);